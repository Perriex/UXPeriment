const is_active=()=>{let e=JSON.parse(localStorage.getItem(STORAGE_KEY));return e?0===e.click_frequency?-1:e.click_frequency??[]:[]};try{document.addEventListener("click",e=>{if(!list_of_unlimited_tags.includes(e.target.tagName)||-1===is_active())return;let t=e.target;if(!t.parentNode)return;let n=find_crowded_family(t.parentNode,t);n.children.length<3||relocate_items(n.children)})}catch(e){console.log(e)}document.addEventListener("keydown",function(e){e.ctrlKey&&(";"===e.key||"ک"===e.key)&&-1!==is_active()&&(console.log("%c BIPA frequency counter deactivated, changing the ui locked!","background: #f00; color: #fa0"),lock_reocord_frequency())}),document.addEventListener("keydown",function(e){e.ctrlKey&&("'"===e.key||"گ"===e.key)&&-1===is_active()&&(console.log("%c BIPA frequency counter activated, changing the ui unlocked!","background: #0f0; color: #efefef"),unlock_reocord_frequency())});const increase_frequency=e=>{let t=(Number(e.getAttribute("frequency"))+1)??1;e.setAttribute("frequency",t),save_new_frequency(e)},save_new_frequency=e=>{let t=get_data();if(0===t.click_frequency)return;let n=e.getAttribute("id")??get_element_path(e),r=e.getAttribute("frequency");if(!r||!Array.isArray(t.click_frequency))return;let c=t.click_frequency.findIndex(e=>e.id===n),i=get_current_date();c>-1?(t.click_frequency[c].frequency=r,t.click_frequency[c].date=i):t.click_frequency.push({id:n,frequency:r,date:i}),set_data(t)},get_frequncy=e=>Number(e.getAttribute("frequency"));function relocate_items(e){if((e=Array.prototype.slice.call(e)).filter(e=>list_of_unlimited_tags.includes(e.tagName)).length!==e.length)return;let t=e.filter(e=>5>get_frequncy(e)),n=e.filter(e=>get_frequncy(e)>=5);n.reverse().sort((e,t)=>{let n=new Date(t.date)-new Date(e.date);return 0===n?get_frequncy(e)>get_frequncy(t)?-1:1:n});let r=n.concat(t);for(var c=0,i=r.length;c<i;c++){var l=r[c].parentNode,f=l.removeChild(r[c]);l.appendChild(f)}}function find_crowded_family(e,t){if(e)return e.children.length>3?(increase_frequency(t),find_crowded_family(e.parentNode),e):find_crowded_family(e.parentNode,e)}const list_of_unlimited_tags=["UL","LI","DIV","BUTTON","H1","H2","H3","H4","H5","H6","A","OPTION","SELECT",];